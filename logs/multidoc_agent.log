
2025-11-07 23:13:54,836 - src.preprocessors.pdf_to_image - INFO - Iniciando conversión de PDF: c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\data\input\pdf\25105 25106 25107 & 25108 MV SKY KNIGHT - VAL TISUR.pdf
2025-11-07 23:13:56,373 - src.preprocessors.pdf_to_image - INFO - PDF convertido: 1 páginas
2025-11-07 23:13:56,452 - src.preprocessors.pdf_to_image - INFO - Página 1 guardada: 25105 25106 25107 & 25108 MV SKY KNIGHT - VAL TISUR_page_1.png
2025-11-07 23:13:56,455 - src.preprocessors.pdf_to_image - INFO - Metadata guardada: c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\data\images\pdf_images\25105 25106 25107 & 25108 MV SKY KNIGHT - VAL TISUR_metadata.json
2025-11-07 23:15:43,856 - src.preprocessors.pdf_to_image - INFO - Iniciando conversión de PDF: c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\data\input\pdf\25105 25106 25107 & 25108 MV SKY KNIGHT - VAL TISUR.pdf
2025-11-07 23:15:45,020 - src.preprocessors.pdf_to_image - INFO - PDF convertido: 1 páginas
2025-11-07 23:15:45,050 - src.preprocessors.pdf_to_image - INFO - Página 1 guardada: 25105 25106 25107 & 25108 MV SKY KNIGHT - VAL TISUR_page_1.png
2025-11-07 23:15:45,052 - src.preprocessors.pdf_to_image - INFO - Metadata guardada: c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\data\images\pdf_images\25105 25106 25107 & 25108 MV SKY KNIGHT - VAL TISUR_metadata.json
2025-11-07 23:15:45,054 - src.preprocessors.pdf_to_image - INFO - Iniciando conversión de PDF: c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\data\input\pdf\25105 25106 25107 & 25108 MV SKY KNIGHT - VAL TISUR.pdf
2025-11-07 23:15:46,220 - src.preprocessors.pdf_to_image - INFO - PDF convertido: 1 páginas
2025-11-07 23:15:46,287 - src.preprocessors.pdf_to_image - INFO - Página 1 guardada: 25105 25106 25107 & 25108 MV SKY KNIGHT - VAL TISUR_page_1.png
2025-11-07 23:15:46,289 - src.preprocessors.pdf_to_image - INFO - Metadata guardada: c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\data\images\pdf_images\25105 25106 25107 & 25108 MV SKY KNIGHT - VAL TISUR_metadata.json
2025-11-07 23:15:46,293 - src.preprocessors.pdf_to_image - INFO - Iniciando conversión de PDF: c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\data\input\pdf\25105 25106 25107 & 25108 MV SKY KNIGHT - VAL TISUR.pdf
2025-11-07 23:15:47,554 - src.preprocessors.pdf_to_image - INFO - PDF convertido: 1 páginas
2025-11-07 23:15:47,651 - src.preprocessors.pdf_to_image - INFO - Página 1 guardada: 25105 25106 25107 & 25108 MV SKY KNIGHT - VAL TISUR_page_1.png
2025-11-07 23:15:47,653 - src.preprocessors.pdf_to_image - INFO - Metadata guardada: c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\data\images\pdf_images\25105 25106 25107 & 25108 MV SKY KNIGHT - VAL TISUR_metadata.json
2025-11-07 23:15:47,656 - src.preprocessors.pdf_to_image - INFO - Iniciando conversión de PDF: c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\data\input\pdf\25105 25106 25107 & 25108 MV SKY KNIGHT - VAL TISUR.pdf
2025-11-07 23:15:49,149 - src.preprocessors.pdf_to_image - INFO - PDF convertido: 1 páginas
2025-11-07 23:15:49,351 - src.preprocessors.pdf_to_image - INFO - Página 1 guardada: 25105 25106 25107 & 25108 MV SKY KNIGHT - VAL TISUR_page_1.png
2025-11-07 23:15:49,352 - src.preprocessors.pdf_to_image - INFO - Metadata guardada: c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\data\images\pdf_images\25105 25106 25107 & 25108 MV SKY KNIGHT - VAL TISUR_metadata.json
2025-11-07 23:16:23,947 - src.extractors.ocr_extractor - INFO - Extractor OCR iniciado con el proveedor: landing_ai
2025-11-07 23:16:27,636 - src.extractors.ocr_extractor - INFO - Extrayendo texto de: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1).png
2025-11-07 23:16:33,436 - src.extractors.ocr_extractor - ERROR - Error con la API de Landing AI: 401 Client Error: Unauthorized for url: https://api.landing.ai/v1/document_understanding
Traceback (most recent call last):
  File "c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\src\extractors\ocr_extractor.py", line 115, in _extract_landing_ai
    response.raise_for_status() # Lanza un error si la respuesta no es 2xx
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\.venv\Lib\site-packages\requests\models.py", line 1026, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 401 Client Error: Unauthorized for url: https://api.landing.ai/v1/document_understanding
2025-11-07 23:23:30,939 - src.extractors.ocr_extractor - INFO - Extrayendo texto de: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1).png
2025-11-07 23:23:36,410 - src.extractors.ocr_extractor - ERROR - Error con la API de Landing AI: 401 Client Error: Unauthorized for url: https://api.landing.ai/v1/document_understanding
Traceback (most recent call last):
  File "c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\src\extractors\ocr_extractor.py", line 115, in _extract_landing_ai
    response.raise_for_status() # Lanza un error si la respuesta no es 2xx
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\.venv\Lib\site-packages\requests\models.py", line 1026, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 401 Client Error: Unauthorized for url: https://api.landing.ai/v1/document_understanding
2025-11-07 23:24:13,716 - src.extractors.ocr_extractor - INFO - Extractor OCR iniciado con el proveedor: landing_ai
2025-11-07 23:25:14,081 - src.extractors.ocr_extractor - INFO - Extrayendo texto de: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1).png
2025-11-07 23:25:15,603 - src.extractors.ocr_extractor - ERROR - Error con la API de Landing AI: 401 Client Error: Unauthorized for url: https://api.landing.ai/v1/document_understanding
Traceback (most recent call last):
  File "c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\src\extractors\ocr_extractor.py", line 115, in _extract_landing_ai
    response.raise_for_status() # Lanza un error si la respuesta no es 2xx
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\.venv\Lib\site-packages\requests\models.py", line 1026, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 401 Client Error: Unauthorized for url: https://api.landing.ai/v1/document_understanding
2025-11-07 23:41:23,854 - src.extractors.ocr_extractor - INFO - Extractor OCR iniciado con el proveedor: landing_ai
2025-11-07 23:41:24,483 - src.extractors.ocr_extractor - INFO - Cliente 'LandingAIADE' inicializado.
2025-11-07 23:41:24,516 - src.extractors.ocr_extractor - INFO - Extrayendo texto de: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1).png
2025-11-07 23:41:25,296 - src.extractors.ocr_extractor - ERROR - Error con la API de LandingAI ADE: Error code: 422 - {'error': 'Unsupported or unrecognizable file format: upload. Supported formats: BMP, DCX, DDS, DIB, DOC, DOCX, GIF, ICNS, JP2, JPEG, JPG, ODP, ODT, PCX, PDF, PNG, PPM, PPT, PPTX, PSD, RTF, TGA, TIFF, WEBP'}
Traceback (most recent call last):
  File "c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\src\extractors\ocr_extractor.py", line 88, in _extract_landing_ai
    response = self.client.parse(
        document=image_path, # CHANGED: Pasamos la ruta del archivo
        model="dpt-2-latest" # Modelo de la documentación
    )
  File "c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\.venv\Lib\site-packages\landingai_ade\_client.py", line 380, in parse
    return self.post(
           ~~~~~~~~~^
        "/v1/ade/parse",
        ^^^^^^^^^^^^^^^^
    ...<8 lines>...
        cast_to=ParseResponse,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\.venv\Lib\site-packages\landingai_ade\_base_client.py", line 1242, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\.venv\Lib\site-packages\landingai_ade\_base_client.py", line 1044, in request
    raise self._make_status_error_from_response(err.response) from None
landingai_ade.UnprocessableEntityError: Error code: 422 - {'error': 'Unsupported or unrecognizable file format: upload. Supported formats: BMP, DCX, DDS, DIB, DOC, DOCX, GIF, ICNS, JP2, JPEG, JPG, ODP, ODT, PCX, PDF, PNG, PPM, PPT, PPTX, PSD, RTF, TGA, TIFF, WEBP'}
2025-11-07 23:48:51,557 - src.extractors.ocr_extractor - INFO - Extractor OCR iniciado con el proveedor: landing_ai
2025-11-07 23:48:52,179 - src.extractors.ocr_extractor - INFO - Cliente 'LandingAIADE' inicializado.
2025-11-07 23:48:52,235 - src.extractors.ocr_extractor - INFO - Extrayendo texto de: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1).png
2025-11-07 23:48:52,961 - src.extractors.ocr_extractor - ERROR - Error con la API de LandingAI ADE: Error code: 422 - {'error': 'Unsupported or unrecognizable file format: upload. Supported formats: BMP, DCX, DDS, DIB, DOC, DOCX, GIF, ICNS, JP2, JPEG, JPG, ODP, ODT, PCX, PDF, PNG, PPM, PPT, PPTX, PSD, RTF, TGA, TIFF, WEBP'}
Traceback (most recent call last):
  File "c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\src\extractors\ocr_extractor.py", line 88, in _extract_landing_ai
    response = self.client.parse(
        document=image_path, # CHANGED: Pasamos la ruta del archivo
        model="dpt-2-latest" # Modelo de la documentación
    )
  File "c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\.venv\Lib\site-packages\landingai_ade\_client.py", line 380, in parse
    return self.post(
           ~~~~~~~~~^
        "/v1/ade/parse",
        ^^^^^^^^^^^^^^^^
    ...<8 lines>...
        cast_to=ParseResponse,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\.venv\Lib\site-packages\landingai_ade\_base_client.py", line 1242, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\.venv\Lib\site-packages\landingai_ade\_base_client.py", line 1044, in request
    raise self._make_status_error_from_response(err.response) from None
landingai_ade.UnprocessableEntityError: Error code: 422 - {'error': 'Unsupported or unrecognizable file format: upload. Supported formats: BMP, DCX, DDS, DIB, DOC, DOCX, GIF, ICNS, JP2, JPEG, JPG, ODP, ODT, PCX, PDF, PNG, PPM, PPT, PPTX, PSD, RTF, TGA, TIFF, WEBP'}
2025-11-07 23:50:31,288 - src.extractors.ocr_extractor - INFO - Extrayendo texto de: 25105 25106 25107 & 25108 MV SKY KNIGHT - VAL TISUR_page_1.png
2025-11-07 23:50:31,946 - src.extractors.ocr_extractor - ERROR - Error con la API de LandingAI ADE: Error code: 422 - {'error': 'Unsupported or unrecognizable file format: upload. Supported formats: BMP, DCX, DDS, DIB, DOC, DOCX, GIF, ICNS, JP2, JPEG, JPG, ODP, ODT, PCX, PDF, PNG, PPM, PPT, PPTX, PSD, RTF, TGA, TIFF, WEBP'}
Traceback (most recent call last):
  File "c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\src\extractors\ocr_extractor.py", line 88, in _extract_landing_ai
    response = self.client.parse(
        document=image_path, # CHANGED: Pasamos la ruta del archivo
        model="dpt-2-latest" # Modelo de la documentación
    )
  File "c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\.venv\Lib\site-packages\landingai_ade\_client.py", line 380, in parse
    return self.post(
           ~~~~~~~~~^
        "/v1/ade/parse",
        ^^^^^^^^^^^^^^^^
    ...<8 lines>...
        cast_to=ParseResponse,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\.venv\Lib\site-packages\landingai_ade\_base_client.py", line 1242, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\.venv\Lib\site-packages\landingai_ade\_base_client.py", line 1044, in request
    raise self._make_status_error_from_response(err.response) from None
landingai_ade.UnprocessableEntityError: Error code: 422 - {'error': 'Unsupported or unrecognizable file format: upload. Supported formats: BMP, DCX, DDS, DIB, DOC, DOCX, GIF, ICNS, JP2, JPEG, JPG, ODP, ODT, PCX, PDF, PNG, PPM, PPT, PPTX, PSD, RTF, TGA, TIFF, WEBP'}
2025-11-07 23:55:07,205 - src.extractors.ocr_extractor - INFO - Extractor OCR iniciado con el proveedor: landing_ai
2025-11-07 23:55:07,805 - src.extractors.ocr_extractor - INFO - Cliente 'LandingAIADE' inicializado.
2025-11-07 23:55:12,044 - src.extractors.ocr_extractor - INFO - Extrayendo texto de: 25105 25106 25107 & 25108 MV SKY KNIGHT - VAL TISUR_page_1.png
2025-11-07 23:55:12,910 - src.extractors.ocr_extractor - ERROR - Error con la API de LandingAI ADE: Error code: 422 - {'error': 'Unsupported or unrecognizable file format: upload. Supported formats: BMP, DCX, DDS, DIB, DOC, DOCX, GIF, ICNS, JP2, JPEG, JPG, ODP, ODT, PCX, PDF, PNG, PPM, PPT, PPTX, PSD, RTF, TGA, TIFF, WEBP'}
Traceback (most recent call last):
  File "c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\src\extractors\ocr_extractor.py", line 88, in _extract_landing_ai
    response = self.client.parse(
        document=image_path, # CHANGED: Pasamos la ruta del archivo
        model="dpt-2-latest" # Modelo de la documentación
    )
  File "c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\.venv\Lib\site-packages\landingai_ade\_client.py", line 380, in parse
    return self.post(
           ~~~~~~~~~^
        "/v1/ade/parse",
        ^^^^^^^^^^^^^^^^
    ...<8 lines>...
        cast_to=ParseResponse,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\.venv\Lib\site-packages\landingai_ade\_base_client.py", line 1242, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\.venv\Lib\site-packages\landingai_ade\_base_client.py", line 1044, in request
    raise self._make_status_error_from_response(err.response) from None
landingai_ade.UnprocessableEntityError: Error code: 422 - {'error': 'Unsupported or unrecognizable file format: upload. Supported formats: BMP, DCX, DDS, DIB, DOC, DOCX, GIF, ICNS, JP2, JPEG, JPG, ODP, ODT, PCX, PDF, PNG, PPM, PPT, PPTX, PSD, RTF, TGA, TIFF, WEBP'}
2025-11-08 00:00:22,622 - src.extractors.ocr_extractor - INFO - Extrayendo texto de: 25105 25106 25107 & 25108 MV SKY KNIGHT - VAL TISUR.pdf
2025-11-08 00:00:23,317 - src.extractors.ocr_extractor - ERROR - Error con la API de LandingAI ADE: Error code: 422 - {'error': 'Unsupported or unrecognizable file format: upload. Supported formats: BMP, DCX, DDS, DIB, DOC, DOCX, GIF, ICNS, JP2, JPEG, JPG, ODP, ODT, PCX, PDF, PNG, PPM, PPT, PPTX, PSD, RTF, TGA, TIFF, WEBP'}
Traceback (most recent call last):
  File "c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\src\extractors\ocr_extractor.py", line 88, in _extract_landing_ai
    response = self.client.parse(
        document=image_path, # CHANGED: Pasamos la ruta del archivo
        model="dpt-2-latest" # Modelo de la documentación
    )
  File "c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\.venv\Lib\site-packages\landingai_ade\_client.py", line 380, in parse
    return self.post(
           ~~~~~~~~~^
        "/v1/ade/parse",
        ^^^^^^^^^^^^^^^^
    ...<8 lines>...
        cast_to=ParseResponse,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\.venv\Lib\site-packages\landingai_ade\_base_client.py", line 1242, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\.venv\Lib\site-packages\landingai_ade\_base_client.py", line 1044, in request
    raise self._make_status_error_from_response(err.response) from None
landingai_ade.UnprocessableEntityError: Error code: 422 - {'error': 'Unsupported or unrecognizable file format: upload. Supported formats: BMP, DCX, DDS, DIB, DOC, DOCX, GIF, ICNS, JP2, JPEG, JPG, ODP, ODT, PCX, PDF, PNG, PPM, PPT, PPTX, PSD, RTF, TGA, TIFF, WEBP'}
2025-11-08 00:11:07,143 - src.extractors.structure_parser - INFO - StructureParser inicializado con el esquema: LiquidacionData
2025-11-08 00:12:32,040 - src.extractors.ocr_extractor - INFO - Extrayendo texto de: 25105 25106 25107 & 25108 MV SKY KNIGHT - VAL TISUR.pdf
2025-11-08 00:12:32,681 - src.extractors.ocr_extractor - ERROR - Error con la API de LandingAI ADE: Error code: 422 - {'error': 'Unsupported or unrecognizable file format: upload. Supported formats: BMP, DCX, DDS, DIB, DOC, DOCX, GIF, ICNS, JP2, JPEG, JPG, ODP, ODT, PCX, PDF, PNG, PPM, PPT, PPTX, PSD, RTF, TGA, TIFF, WEBP'}
Traceback (most recent call last):
  File "c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\src\extractors\ocr_extractor.py", line 88, in _extract_landing_ai
    response = self.client.parse(
        document=image_path, # CHANGED: Pasamos la ruta del archivo
        model="dpt-2-latest" # Modelo de la documentación
    )
  File "c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\.venv\Lib\site-packages\landingai_ade\_client.py", line 380, in parse
    return self.post(
           ~~~~~~~~~^
        "/v1/ade/parse",
        ^^^^^^^^^^^^^^^^
    ...<8 lines>...
        cast_to=ParseResponse,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\.venv\Lib\site-packages\landingai_ade\_base_client.py", line 1242, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\.venv\Lib\site-packages\landingai_ade\_base_client.py", line 1044, in request
    raise self._make_status_error_from_response(err.response) from None
landingai_ade.UnprocessableEntityError: Error code: 422 - {'error': 'Unsupported or unrecognizable file format: upload. Supported formats: BMP, DCX, DDS, DIB, DOC, DOCX, GIF, ICNS, JP2, JPEG, JPG, ODP, ODT, PCX, PDF, PNG, PPM, PPT, PPTX, PSD, RTF, TGA, TIFF, WEBP'}
2025-11-08 00:12:46,641 - src.extractors.structure_parser - INFO - StructureParser inicializado con el esquema: LiquidacionData
2025-11-08 00:30:17,144 - __main__ - INFO - ADE procesó exitosamente: 25105 25106 25107 & 25108 MV SKY KNIGHT - VAL TISUR.pdf
2025-11-08 00:31:32,593 - __main__ - INFO - ADE procesó exitosamente: 25105 25106 25107 & 25108 MV SKY KNIGHT - VAL TISUR.pdf
2025-11-08 00:38:12,501 - __main__ - ERROR - Error de red al contactar ADE con imagen: HTTPSConnectionPool(host='api.va.landing.ai', port=443): Read timed out. (read timeout=60)
2025-11-08 00:38:24,262 - __main__ - INFO - ADE procesó exitosamente la imagen: 25105 25106 25107 & 25108 MV SKY KNIGHT - VAL TISUR_page_1.png
2025-11-08 00:45:49,834 - src.preprocessors.pdf_to_image - INFO - Iniciando conversión de PDF: c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\data\input\pdf\25105 25106 25107 & 25108 MV SKY KNIGHT - VAL TISUR.pdf
2025-11-08 00:45:51,465 - src.preprocessors.pdf_to_image - INFO - PDF convertido: 1 páginas
2025-11-08 00:45:51,527 - src.preprocessors.pdf_to_image - INFO - Página 1 guardada: 25105 25106 25107 & 25108 MV SKY KNIGHT - VAL TISUR_page_1.png
2025-11-08 00:45:51,529 - src.preprocessors.pdf_to_image - INFO - Metadata guardada: c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\data\images\pdf_images\25105 25106 25107 & 25108 MV SKY KNIGHT - VAL TISUR_metadata.json
2025-11-08 01:03:09,152 - __main__ - ERROR - Archivo de imagen no encontrado: c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\data\images\excel_images\10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1).png
2025-11-08 01:03:18,684 - __main__ - INFO - ADE procesó exitosamente la imagen: 25105 25106 25107 & 25108 MV SKY KNIGHT - VAL TISUR_page_1.png
2025-11-08 01:04:15,605 - src.extractors.ocr_extractor - INFO - Extractor OCR iniciado con el proveedor: landing_ai
2025-11-08 01:04:16,219 - src.extractors.ocr_extractor - INFO - Cliente 'LandingAIADE' inicializado.
2025-11-08 01:04:49,254 - __main__ - INFO - ADE procesó exitosamente: 25105 25106 25107 & 25108 MV SKY KNIGHT - VAL TISUR.pdf
2025-11-08 01:05:34,915 - __main__ - INFO - ADE procesó exitosamente la imagen: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r0_c0.png
2025-11-08 01:05:57,654 - __main__ - INFO - ADE procesó exitosamente la imagen: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r0_c200.png
2025-11-08 01:06:10,553 - __main__ - INFO - ADE procesó exitosamente la imagen: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r0_c250.png
2025-11-08 01:06:51,043 - __main__ - INFO - ADE procesó exitosamente la imagen: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r100_c0.png
2025-11-08 01:07:14,762 - __main__ - INFO - ADE procesó exitosamente la imagen: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r150_c0.png
2025-11-08 01:07:52,279 - __main__ - INFO - ADE procesó exitosamente la imagen: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r50_c0.png
2025-11-08 01:08:10,291 - __main__ - INFO - ADE procesó exitosamente la imagen: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r50_c200.png
2025-11-08 01:08:22,453 - __main__ - INFO - ADE procesó exitosamente la imagen: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r50_c250.png
2025-11-08 01:08:29,739 - __main__ - INFO - ADE procesó exitosamente la imagen: 25105 25106 25107 & 25108 MV SKY KNIGHT - VAL TISUR_page_1.png
2025-11-08 11:07:14,601 - src.extractors.structure_parser - INFO - StructureParser inicializado con el esquema: LiquidacionData
2025-11-08 11:07:47,758 - src.extractors.structure_parser - INFO - Iniciando parseo estructurado de texto (Markdown)...
2025-11-08 11:07:57,100 - src.extractors.structure_parser - INFO - Parseo y validación de esquema completados exitosamente.
2025-11-08 11:36:12,897 - src.extractors.structure_parser - INFO - StructureParser inicializado con el esquema: LiquidacionData
2025-11-08 11:37:09,593 - src.extractors.structure_parser - INFO - StructureParser inicializado con el esquema: LiquidacionData
2025-11-08 11:40:38,933 - src.embeddings.clip_encoder - INFO - Cargando modelo CLIP: openai/clip-vit-base-patch32
2025-11-08 11:40:38,935 - src.embeddings.clip_encoder - INFO - Usando device: cpu
2025-11-08 11:40:55,312 - src.embeddings.clip_encoder - INFO - CLIP encoder cargado exitosamente
2025-11-08 11:40:58,872 - src.embeddings.clip_encoder - INFO - Codificando imagen: c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\data\images\excel_images\10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r0_c0.png
2025-11-08 11:41:00,065 - src.embeddings.clip_encoder - INFO - Imagen codificada. Dimensión: (512,)
2025-11-08 11:41:08,121 - src.embeddings.clip_encoder - INFO - Codificando texto (primeros 50 chars): {"numero_factura": null, "fecha_emision": null, "c
2025-11-08 11:41:08,304 - src.embeddings.clip_encoder - INFO - Texto codificado. Dimensión: (512,)
2025-11-08 11:44:21,222 - src.extractors.ocr_extractor - INFO - Iniciando PASO 3: Extracción de Markdown (ADE) de todos los documentos...
2025-11-08 11:44:21,224 - src.extractors.ocr_extractor - INFO - Extractor OCR iniciado con el proveedor: landing_ai
2025-11-08 11:44:21,226 - src.extractors.ocr_extractor - INFO - Se encontraron 1 PDFs originales para procesar.
2025-11-08 11:44:21,229 - src.extractors.ocr_extractor - INFO - Se encontraron 8 imágenes de Excel para procesar.
2025-11-08 11:44:21,230 - src.extractors.ocr_extractor - INFO - Se procesarán 9 documentos en total.
2025-11-08 11:44:21,231 - src.extractors.ocr_extractor - INFO - Extrayendo contenido de: 25105 25106 25107 & 25108 MV SKY KNIGHT - VAL TISUR.pdf
2025-11-08 11:44:32,357 - src.extractors.ocr_extractor - INFO - ADE (PDF) completado para: 25105 25106 25107 & 25108 MV SKY KNIGHT - VAL TISUR.pdf
2025-11-08 11:44:32,365 - src.extractors.ocr_extractor - INFO - Markdown guardado en: 25105 25106 25107 & 25108 MV SKY KNIGHT - VAL TISUR_text.json
2025-11-08 11:44:32,367 - src.extractors.ocr_extractor - INFO - Extrayendo contenido de: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r0_c0.png
2025-11-08 11:45:11,821 - src.extractors.ocr_extractor - INFO - ADE (Imagen) completado para: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r0_c0.png
2025-11-08 11:45:11,977 - src.extractors.ocr_extractor - INFO - Markdown guardado en: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r0_c0_text.json
2025-11-08 11:45:11,979 - src.extractors.ocr_extractor - INFO - Extrayendo contenido de: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r0_c200.png
2025-11-08 11:45:33,708 - src.extractors.ocr_extractor - INFO - ADE (Imagen) completado para: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r0_c200.png
2025-11-08 11:45:33,725 - src.extractors.ocr_extractor - INFO - Markdown guardado en: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r0_c200_text.json
2025-11-08 11:45:33,730 - src.extractors.ocr_extractor - INFO - Extrayendo contenido de: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r0_c250.png
2025-11-08 11:45:49,145 - src.extractors.ocr_extractor - INFO - ADE (Imagen) completado para: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r0_c250.png
2025-11-08 11:45:49,240 - src.extractors.ocr_extractor - INFO - Markdown guardado en: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r0_c250_text.json
2025-11-08 11:45:49,243 - src.extractors.ocr_extractor - INFO - Extrayendo contenido de: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r100_c0.png
2025-11-08 11:46:26,959 - src.extractors.ocr_extractor - INFO - ADE (Imagen) completado para: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r100_c0.png
2025-11-08 11:46:27,077 - src.extractors.ocr_extractor - INFO - Markdown guardado en: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r100_c0_text.json
2025-11-08 11:46:27,080 - src.extractors.ocr_extractor - INFO - Extrayendo contenido de: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r150_c0.png
2025-11-08 11:46:51,482 - src.extractors.ocr_extractor - INFO - ADE (Imagen) completado para: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r150_c0.png
2025-11-08 11:46:51,584 - src.extractors.ocr_extractor - INFO - Markdown guardado en: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r150_c0_text.json
2025-11-08 11:46:51,586 - src.extractors.ocr_extractor - INFO - Extrayendo contenido de: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r50_c0.png
2025-11-08 11:47:32,199 - src.extractors.ocr_extractor - INFO - ADE (Imagen) completado para: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r50_c0.png
2025-11-08 11:47:32,430 - src.extractors.ocr_extractor - INFO - Markdown guardado en: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r50_c0_text.json
2025-11-08 11:47:32,432 - src.extractors.ocr_extractor - INFO - Extrayendo contenido de: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r50_c200.png
2025-11-08 11:47:50,354 - src.extractors.ocr_extractor - INFO - ADE (Imagen) completado para: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r50_c200.png
2025-11-08 11:47:50,373 - src.extractors.ocr_extractor - INFO - Markdown guardado en: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r50_c200_text.json
2025-11-08 11:47:50,380 - src.extractors.ocr_extractor - INFO - Extrayendo contenido de: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r50_c250.png
2025-11-08 11:48:16,980 - src.extractors.ocr_extractor - INFO - ADE (Imagen) completado para: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r50_c250.png
2025-11-08 11:48:17,063 - src.extractors.ocr_extractor - INFO - Markdown guardado en: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r50_c250_text.json
2025-11-08 11:48:17,067 - src.extractors.ocr_extractor - INFO - Extracción de Markdown completada. 9 archivos procesados.
2025-11-08 11:48:35,821 - src.extractors.structure_parser - INFO - Iniciando PASO 4: Parseo y Estructuración (Markdown a JSON)...
2025-11-08 11:48:37,619 - src.extractors.structure_parser - INFO - StructureParser inicializado con el esquema: LiquidacionData
2025-11-08 11:48:37,622 - src.extractors.structure_parser - INFO - Se encontraron 9 archivos de Markdown para parsear.
2025-11-08 11:48:37,666 - src.extractors.structure_parser - INFO - Iniciando parseo estructurado de texto (Markdown)...
2025-11-08 11:48:54,292 - src.extractors.structure_parser - INFO - Parseo y validación de esquema completados exitosamente.
2025-11-08 11:48:54,298 - src.extractors.structure_parser - INFO - Estructura JSON guardada en: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r0_c0_structure.json
2025-11-08 11:48:54,332 - src.extractors.structure_parser - INFO - Iniciando parseo estructurado de texto (Markdown)...
2025-11-08 11:49:07,057 - src.extractors.structure_parser - INFO - Parseo y validación de esquema completados exitosamente.
2025-11-08 11:49:07,060 - src.extractors.structure_parser - INFO - Estructura JSON guardada en: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r0_c200_structure.json
2025-11-08 11:49:07,084 - src.extractors.structure_parser - INFO - Iniciando parseo estructurado de texto (Markdown)...
2025-11-08 11:49:34,284 - src.extractors.structure_parser - ERROR - La salida del LLM no validó contra el esquema Pydantic. Error: 2 validation errors for LiquidacionData
items_detalle
  Field required [type=missing, input_value={'$defs': {'LiquidacionIt...Data', 'type': 'object'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
resumen_financiero
  Field required [type=missing, input_value={'$defs': {'LiquidacionIt...Data', 'type': 'object'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
2025-11-08 11:49:34,287 - src.extractors.structure_parser - ERROR - Ocurrió un error inesperado durante el parseo: Datos del LLM no válidos: 2 validation errors for LiquidacionData
items_detalle
  Field required [type=missing, input_value={'$defs': {'LiquidacionIt...Data', 'type': 'object'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
resumen_financiero
  Field required [type=missing, input_value={'$defs': {'LiquidacionIt...Data', 'type': 'object'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
Traceback (most recent call last):
  File "c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\src\extractors\structure_parser.py", line 161, in parse_document
    validated_data = self.target_schema.model_validate(parsed_json)
  File "c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\.venv\Lib\site-packages\pydantic\main.py", line 716, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        obj,
        ^^^^
    ...<5 lines>...
        by_name=by_name,
        ^^^^^^^^^^^^^^^^
    )
    ^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for LiquidacionData
items_detalle
  Field required [type=missing, input_value={'$defs': {'LiquidacionIt...Data', 'type': 'object'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
resumen_financiero
  Field required [type=missing, input_value={'$defs': {'LiquidacionIt...Data', 'type': 'object'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\src\extractors\structure_parser.py", line 168, in parse_document
    raise ValueError(f"Datos del LLM no válidos: {e}")
ValueError: Datos del LLM no válidos: 2 validation errors for LiquidacionData
items_detalle
  Field required [type=missing, input_value={'$defs': {'LiquidacionIt...Data', 'type': 'object'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
resumen_financiero
  Field required [type=missing, input_value={'$defs': {'LiquidacionIt...Data', 'type': 'object'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
2025-11-08 11:49:34,292 - src.extractors.structure_parser - ERROR - Fallo al parsear el archivo 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r0_c250_text.json: Datos del LLM no válidos: 2 validation errors for LiquidacionData
items_detalle
  Field required [type=missing, input_value={'$defs': {'LiquidacionIt...Data', 'type': 'object'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
resumen_financiero
  Field required [type=missing, input_value={'$defs': {'LiquidacionIt...Data', 'type': 'object'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
Traceback (most recent call last):
  File "c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\src\extractors\structure_parser.py", line 161, in parse_document
    validated_data = self.target_schema.model_validate(parsed_json)
  File "c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\.venv\Lib\site-packages\pydantic\main.py", line 716, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        obj,
        ^^^^
    ...<5 lines>...
        by_name=by_name,
        ^^^^^^^^^^^^^^^^
    )
    ^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for LiquidacionData
items_detalle
  Field required [type=missing, input_value={'$defs': {'LiquidacionIt...Data', 'type': 'object'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
resumen_financiero
  Field required [type=missing, input_value={'$defs': {'LiquidacionIt...Data', 'type': 'object'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\src\extractors\structure_parser.py", line 216, in process_all_extracted_text
    structured_data = parser.parse_document(ocr_text)
  File "c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\src\extractors\structure_parser.py", line 168, in parse_document
    raise ValueError(f"Datos del LLM no válidos: {e}")
ValueError: Datos del LLM no válidos: 2 validation errors for LiquidacionData
items_detalle
  Field required [type=missing, input_value={'$defs': {'LiquidacionIt...Data', 'type': 'object'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
resumen_financiero
  Field required [type=missing, input_value={'$defs': {'LiquidacionIt...Data', 'type': 'object'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
2025-11-08 11:49:34,336 - src.extractors.structure_parser - INFO - Iniciando parseo estructurado de texto (Markdown)...
2025-11-08 11:49:46,073 - src.extractors.structure_parser - INFO - Parseo y validación de esquema completados exitosamente.
2025-11-08 11:49:46,080 - src.extractors.structure_parser - INFO - Estructura JSON guardada en: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r100_c0_structure.json
2025-11-08 11:49:46,182 - src.extractors.structure_parser - INFO - Iniciando parseo estructurado de texto (Markdown)...
2025-11-08 11:49:54,428 - src.extractors.structure_parser - INFO - Parseo y validación de esquema completados exitosamente.
2025-11-08 11:49:54,434 - src.extractors.structure_parser - INFO - Estructura JSON guardada en: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r150_c0_structure.json
2025-11-08 11:49:54,527 - src.extractors.structure_parser - INFO - Iniciando parseo estructurado de texto (Markdown)...
2025-11-08 11:50:06,230 - src.extractors.structure_parser - INFO - Parseo y validación de esquema completados exitosamente.
2025-11-08 11:50:06,239 - src.extractors.structure_parser - INFO - Estructura JSON guardada en: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r50_c0_structure.json
2025-11-08 11:50:06,281 - src.extractors.structure_parser - INFO - Iniciando parseo estructurado de texto (Markdown)...
2025-11-08 11:50:13,793 - src.extractors.structure_parser - INFO - Parseo y validación de esquema completados exitosamente.
2025-11-08 11:50:13,797 - src.extractors.structure_parser - INFO - Estructura JSON guardada en: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r50_c200_structure.json
2025-11-08 11:50:13,829 - src.extractors.structure_parser - INFO - Iniciando parseo estructurado de texto (Markdown)...
2025-11-08 11:50:22,869 - src.extractors.structure_parser - INFO - Parseo y validación de esquema completados exitosamente.
2025-11-08 11:50:22,877 - src.extractors.structure_parser - INFO - Estructura JSON guardada en: 10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r50_c250_structure.json
2025-11-08 11:50:22,924 - src.extractors.structure_parser - INFO - Iniciando parseo estructurado de texto (Markdown)...
2025-11-08 11:50:31,891 - src.extractors.structure_parser - INFO - Parseo y validación de esquema completados exitosamente.
2025-11-08 11:50:31,894 - src.extractors.structure_parser - INFO - Estructura JSON guardada en: 25105 25106 25107 & 25108 MV SKY KNIGHT - VAL TISUR_structure.json
2025-11-08 11:50:31,897 - src.extractors.structure_parser - INFO - Parseo completado: 9 archivos procesados.
2025-11-08 11:50:45,685 - src.embeddings.clip_encoder - INFO - Cargando modelo CLIP: openai/clip-vit-base-patch32
2025-11-08 11:50:45,687 - src.embeddings.clip_encoder - INFO - Usando device: cpu
2025-11-08 11:50:50,752 - src.embeddings.clip_encoder - INFO - CLIP encoder cargado exitosamente
2025-11-08 11:50:50,754 - src.embeddings.clip_encoder - INFO - Procesando 8 imágenes totales (solo Excel)
2025-11-08 11:50:50,755 - src.embeddings.clip_encoder - INFO - Batch encoding de 8 imágenes
2025-11-08 11:50:50,756 - src.embeddings.clip_encoder - INFO - Codificando imagen: c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\data\images\excel_images\10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r0_c0.png
2025-11-08 11:50:51,648 - src.embeddings.clip_encoder - INFO - Imagen codificada. Dimensión: (512,)
2025-11-08 11:50:51,672 - src.embeddings.clip_encoder - INFO - Codificando imagen: c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\data\images\excel_images\10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r0_c200.png
2025-11-08 11:50:52,638 - src.embeddings.clip_encoder - INFO - Imagen codificada. Dimensión: (512,)
2025-11-08 11:50:52,660 - src.embeddings.clip_encoder - INFO - Codificando imagen: c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\data\images\excel_images\10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r0_c250.png
2025-11-08 11:50:52,977 - src.embeddings.clip_encoder - INFO - Imagen codificada. Dimensión: (512,)
2025-11-08 11:50:52,981 - src.embeddings.clip_encoder - INFO - Codificando imagen: c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\data\images\excel_images\10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r100_c0.png
2025-11-08 11:50:53,851 - src.embeddings.clip_encoder - INFO - Imagen codificada. Dimensión: (512,)
2025-11-08 11:50:53,867 - src.embeddings.clip_encoder - INFO - Codificando imagen: c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\data\images\excel_images\10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r150_c0.png
2025-11-08 11:50:54,458 - src.embeddings.clip_encoder - INFO - Imagen codificada. Dimensión: (512,)
2025-11-08 11:50:54,470 - src.embeddings.clip_encoder - INFO - Codificando imagen: c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\data\images\excel_images\10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r50_c0.png
2025-11-08 11:50:55,391 - src.embeddings.clip_encoder - INFO - Imagen codificada. Dimensión: (512,)
2025-11-08 11:50:55,406 - src.embeddings.clip_encoder - INFO - Codificando imagen: c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\data\images\excel_images\10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r50_c200.png
2025-11-08 11:50:56,252 - src.embeddings.clip_encoder - INFO - Imagen codificada. Dimensión: (512,)
2025-11-08 11:50:56,265 - src.embeddings.clip_encoder - INFO - Codificando imagen: c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\data\images\excel_images\10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r50_c250.png
2025-11-08 11:50:56,565 - src.embeddings.clip_encoder - INFO - Imagen codificada. Dimensión: (512,)
2025-11-08 11:50:56,603 - src.embeddings.clip_encoder - INFO - Procesando 8 textos (desde JSON estructurados)
2025-11-08 11:50:56,606 - src.embeddings.clip_encoder - INFO - Batch encoding de 8 textos
2025-11-08 11:50:56,607 - src.embeddings.clip_encoder - INFO - Codificando texto (primeros 50 chars): {"numero_factura": null, "fecha_emision": null, "c
2025-11-08 11:50:56,709 - src.embeddings.clip_encoder - INFO - Texto codificado. Dimensión: (512,)
2025-11-08 11:50:56,712 - src.embeddings.clip_encoder - INFO - Codificando texto (primeros 50 chars): {"numero_factura": null, "fecha_emision": null, "c
2025-11-08 11:50:56,767 - src.embeddings.clip_encoder - INFO - Texto codificado. Dimensión: (512,)
2025-11-08 11:50:56,770 - src.embeddings.clip_encoder - INFO - Codificando texto (primeros 50 chars): {"numero_factura": null, "fecha_emision": null, "c
2025-11-08 11:50:56,833 - src.embeddings.clip_encoder - INFO - Texto codificado. Dimensión: (512,)
2025-11-08 11:50:56,837 - src.embeddings.clip_encoder - INFO - Codificando texto (primeros 50 chars): {"numero_factura": null, "fecha_emision": null, "c
2025-11-08 11:50:56,908 - src.embeddings.clip_encoder - INFO - Texto codificado. Dimensión: (512,)
2025-11-08 11:50:56,912 - src.embeddings.clip_encoder - INFO - Codificando texto (primeros 50 chars): {"numero_factura": null, "fecha_emision": null, "c
2025-11-08 11:50:56,982 - src.embeddings.clip_encoder - INFO - Texto codificado. Dimensión: (512,)
2025-11-08 11:50:56,986 - src.embeddings.clip_encoder - INFO - Codificando texto (primeros 50 chars): {"numero_factura": null, "fecha_emision": null, "c
2025-11-08 11:50:57,056 - src.embeddings.clip_encoder - INFO - Texto codificado. Dimensión: (512,)
2025-11-08 11:50:57,059 - src.embeddings.clip_encoder - INFO - Codificando texto (primeros 50 chars): {"numero_factura": null, "fecha_emision": null, "c
2025-11-08 11:50:57,123 - src.embeddings.clip_encoder - INFO - Texto codificado. Dimensión: (512,)
2025-11-08 11:50:57,128 - src.embeddings.clip_encoder - INFO - Codificando texto (primeros 50 chars): {"numero_factura": null, "fecha_emision": null, "c
2025-11-08 11:50:57,192 - src.embeddings.clip_encoder - INFO - Texto codificado. Dimensión: (512,)
2025-11-08 11:50:57,217 - src.embeddings.clip_encoder - INFO - Embeddings guardados: c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\data\embeddings\image_embeddings.json
2025-11-08 11:50:57,235 - src.embeddings.clip_encoder - INFO - Embeddings guardados: c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\data\embeddings\text_embeddings.json
2025-11-08 12:13:26,186 - src.embeddings.clip_encoder - INFO - Cargando modelo CLIP: openai/clip-vit-base-patch32
2025-11-08 12:13:26,188 - src.embeddings.clip_encoder - INFO - Usando device: cpu
2025-11-08 12:13:32,397 - src.embeddings.clip_encoder - INFO - CLIP encoder cargado exitosamente
2025-11-08 12:13:33,139 - src.embeddings.clip_encoder - INFO - Cargando modelo CLIP: openai/clip-vit-base-patch32
2025-11-08 12:13:33,140 - src.embeddings.clip_encoder - INFO - Usando device: cpu
2025-11-08 12:13:36,472 - src.embeddings.clip_encoder - INFO - CLIP encoder cargado exitosamente
2025-11-08 12:13:45,054 - src.agent.graph_agent - INFO - Inicializando AgentStateGraph
2025-11-08 12:13:45,065 - src.agent.graph_agent - INFO - Grafo compilado con éxito
2025-11-08 12:13:45,067 - src.agent.graph_agent - INFO - Grafo inicializado exitosamente
2025-11-08 12:13:45,068 - src.agent.graph_agent - INFO - Ejecutando agente con query: ¿Cuál es el monto total de la liquidación para el 
2025-11-08 12:13:45,071 - src.agent.nodes - INFO - Query node - Query: ¿Cuál es el monto total de la liquidación para el 
2025-11-08 12:13:45,073 - src.agent.nodes - INFO - Query preparada: ¿Cuál es el monto total de la liquidación para el lote 25105?
2025-11-08 12:13:45,075 - src.agent.nodes - INFO - Retrieve node - Buscando documentos
2025-11-08 12:13:45,077 - src.embeddings.clip_encoder - INFO - Cargando modelo CLIP: openai/clip-vit-base-patch32
2025-11-08 12:13:45,080 - src.embeddings.clip_encoder - INFO - Usando device: cpu
2025-11-08 12:13:48,193 - src.embeddings.clip_encoder - INFO - CLIP encoder cargado exitosamente
2025-11-08 12:13:48,195 - src.embeddings.clip_encoder - INFO - Cargando modelo CLIP: openai/clip-vit-base-patch32
2025-11-08 12:13:48,196 - src.embeddings.clip_encoder - INFO - Usando device: cpu
2025-11-08 12:13:51,450 - src.embeddings.clip_encoder - INFO - CLIP encoder cargado exitosamente
2025-11-08 12:13:51,454 - src.embeddings.clip_encoder - INFO - Codificando texto (primeros 50 chars): ¿Cuál es el monto total de la liquidación para el 
2025-11-08 12:13:51,526 - src.embeddings.clip_encoder - INFO - Texto codificado. Dimensión: (512,)
2025-11-08 12:13:51,529 - src.agent.nodes - ERROR - Error durante retrieval: 'MultimodalIndexer' object has no attribute 'search_by_embedding'
2025-11-08 12:13:51,548 - src.agent.nodes - INFO - Reason node - Razonando con LLM
2025-11-08 12:13:51,550 - src.agent.nodes - WARNING - No hay documentos para razonar
2025-11-08 12:13:51,553 - src.agent.nodes - INFO - Format node - Formateando respuesta
2025-11-08 12:13:51,556 - src.agent.nodes - INFO - Respuesta formateada
2025-11-08 12:13:51,559 - src.agent.graph_agent - INFO - Ejecución del agente completada
2025-11-08 12:14:08,958 - src.agent.graph_agent - INFO - Ejecutando agente con query: ¿Cuál es el tonelaje para el lote 25105?
2025-11-08 12:14:08,967 - src.agent.nodes - INFO - Query node - Query: ¿Cuál es el tonelaje para el lote 25105?
2025-11-08 12:14:08,972 - src.agent.nodes - INFO - Query preparada: ¿Cuál es el tonelaje para el lote 25105?
2025-11-08 12:14:08,978 - src.agent.nodes - INFO - Retrieve node - Buscando documentos
2025-11-08 12:14:08,982 - src.embeddings.clip_encoder - INFO - Cargando modelo CLIP: openai/clip-vit-base-patch32
2025-11-08 12:14:08,986 - src.embeddings.clip_encoder - INFO - Usando device: cpu
2025-11-08 12:14:12,444 - src.embeddings.clip_encoder - INFO - CLIP encoder cargado exitosamente
2025-11-08 12:14:12,447 - src.embeddings.clip_encoder - INFO - Cargando modelo CLIP: openai/clip-vit-base-patch32
2025-11-08 12:14:12,449 - src.embeddings.clip_encoder - INFO - Usando device: cpu
2025-11-08 12:14:15,827 - src.embeddings.clip_encoder - INFO - CLIP encoder cargado exitosamente
2025-11-08 12:14:15,831 - src.embeddings.clip_encoder - INFO - Codificando texto (primeros 50 chars): ¿Cuál es el tonelaje para el lote 25105?
2025-11-08 12:14:15,896 - src.embeddings.clip_encoder - INFO - Texto codificado. Dimensión: (512,)
2025-11-08 12:14:15,898 - src.agent.nodes - ERROR - Error durante retrieval: 'MultimodalIndexer' object has no attribute 'search_by_embedding'
2025-11-08 12:14:15,918 - src.agent.nodes - INFO - Reason node - Razonando con LLM
2025-11-08 12:14:15,922 - src.agent.nodes - WARNING - No hay documentos para razonar
2025-11-08 12:14:15,925 - src.agent.nodes - INFO - Format node - Formateando respuesta
2025-11-08 12:14:15,927 - src.agent.nodes - INFO - Respuesta formateada
2025-11-08 12:14:15,930 - src.agent.graph_agent - INFO - Ejecución del agente completada
2025-11-08 12:25:31,660 - src.embeddings.clip_encoder - INFO - Cargando modelo CLIP: openai/clip-vit-base-patch32
2025-11-08 12:25:31,666 - src.embeddings.clip_encoder - INFO - Usando device: cpu
2025-11-08 12:25:37,105 - src.embeddings.clip_encoder - INFO - CLIP encoder cargado exitosamente
2025-11-08 12:27:49,990 - src.agent.graph_agent - INFO - Inicializando AgentStateGraph
2025-11-08 12:27:50,029 - src.agent.graph_agent - INFO - Grafo compilado con éxito
2025-11-08 12:27:50,036 - src.agent.graph_agent - INFO - Grafo inicializado exitosamente
2025-11-08 12:27:50,041 - src.agent.graph_agent - INFO - Ejecutando agente con query: ¿toda lainformación del lote 25105?
2025-11-08 12:27:50,048 - src.agent.nodes - INFO - Query node - Query: ¿toda lainformación del lote 25105?
2025-11-08 12:27:50,054 - src.agent.nodes - INFO - Query preparada: ¿toda lainformación del lote 25105?
2025-11-08 12:27:50,061 - src.agent.nodes - INFO - Retrieve node - Buscando documentos
2025-11-08 12:27:50,066 - src.embeddings.clip_encoder - INFO - Cargando modelo CLIP: openai/clip-vit-base-patch32
2025-11-08 12:27:50,072 - src.embeddings.clip_encoder - INFO - Usando device: cpu
2025-11-08 12:27:53,413 - src.embeddings.clip_encoder - INFO - CLIP encoder cargado exitosamente
2025-11-08 12:27:53,416 - src.embeddings.clip_encoder - INFO - Cargando modelo CLIP: openai/clip-vit-base-patch32
2025-11-08 12:27:53,418 - src.embeddings.clip_encoder - INFO - Usando device: cpu
2025-11-08 12:27:56,518 - src.embeddings.clip_encoder - INFO - CLIP encoder cargado exitosamente
2025-11-08 12:27:56,522 - src.embeddings.clip_encoder - INFO - Codificando texto (primeros 50 chars): ¿toda lainformación del lote 25105?
2025-11-08 12:27:56,582 - src.embeddings.clip_encoder - INFO - Texto codificado. Dimensión: (512,)
2025-11-08 12:27:56,584 - src.agent.nodes - ERROR - Error durante retrieval: 'MultimodalIndexer' object has no attribute 'search_by_embedding'
2025-11-08 12:27:56,601 - src.agent.nodes - INFO - Reason node - Razonando con LLM
2025-11-08 12:27:56,605 - src.agent.nodes - WARNING - No hay documentos para razonar
2025-11-08 12:27:56,609 - src.agent.nodes - INFO - Format node - Formateando respuesta
2025-11-08 12:27:56,611 - src.agent.nodes - INFO - Respuesta formateada
2025-11-08 12:27:56,613 - src.agent.graph_agent - INFO - Ejecución del agente completada
2025-11-08 12:28:03,970 - src.agent.graph_agent - INFO - Ejecutando agente con query: ¿Cuántas horas de 'TIEMPO MUERTO' se registraron e
2025-11-08 12:28:03,974 - src.agent.nodes - INFO - Query node - Query: ¿Cuántas horas de 'TIEMPO MUERTO' se registraron e
2025-11-08 12:28:03,976 - src.agent.nodes - INFO - Query preparada: ¿Cuántas horas de 'TIEMPO MUERTO' se registraron en total?
2025-11-08 12:28:03,979 - src.agent.nodes - INFO - Retrieve node - Buscando documentos
2025-11-08 12:28:03,985 - src.embeddings.clip_encoder - INFO - Cargando modelo CLIP: openai/clip-vit-base-patch32
2025-11-08 12:28:03,987 - src.embeddings.clip_encoder - INFO - Usando device: cpu
2025-11-08 12:28:07,365 - src.embeddings.clip_encoder - INFO - CLIP encoder cargado exitosamente
2025-11-08 12:28:07,368 - src.embeddings.clip_encoder - INFO - Cargando modelo CLIP: openai/clip-vit-base-patch32
2025-11-08 12:28:07,369 - src.embeddings.clip_encoder - INFO - Usando device: cpu
2025-11-08 12:28:10,688 - src.embeddings.clip_encoder - INFO - CLIP encoder cargado exitosamente
2025-11-08 12:28:10,692 - src.embeddings.clip_encoder - INFO - Codificando texto (primeros 50 chars): ¿Cuántas horas de 'TIEMPO MUERTO' se registraron e
2025-11-08 12:28:10,755 - src.embeddings.clip_encoder - INFO - Texto codificado. Dimensión: (512,)
2025-11-08 12:28:10,758 - src.agent.nodes - ERROR - Error durante retrieval: 'MultimodalIndexer' object has no attribute 'search_by_embedding'
2025-11-08 12:28:10,777 - src.agent.nodes - INFO - Reason node - Razonando con LLM
2025-11-08 12:28:10,780 - src.agent.nodes - WARNING - No hay documentos para razonar
2025-11-08 12:28:10,782 - src.agent.nodes - INFO - Format node - Formateando respuesta
2025-11-08 12:28:10,784 - src.agent.nodes - INFO - Respuesta formateada
2025-11-08 12:28:10,786 - src.agent.graph_agent - INFO - Ejecución del agente completada
2025-11-08 12:34:46,049 - src.embeddings.clip_encoder - INFO - Cargando modelo CLIP: openai/clip-vit-base-patch32
2025-11-08 12:34:46,054 - src.embeddings.clip_encoder - INFO - Usando device: cpu
2025-11-08 12:34:50,992 - src.embeddings.clip_encoder - INFO - CLIP encoder cargado exitosamente
2025-11-08 12:35:09,863 - src.agent.graph_agent - INFO - Inicializando AgentStateGraph
2025-11-08 12:35:09,877 - src.agent.graph_agent - INFO - Grafo compilado con éxito
2025-11-08 12:35:09,879 - src.agent.graph_agent - INFO - Grafo inicializado exitosamente
2025-11-08 12:35:09,880 - src.agent.graph_agent - INFO - Ejecutando agente con query: ¿toda lainformación del lote 25105?
2025-11-08 12:35:09,883 - src.agent.nodes - INFO - Query node - Query: ¿toda lainformación del lote 25105?
2025-11-08 12:35:09,887 - src.agent.nodes - INFO - Query preparada: ¿toda lainformación del lote 25105?
2025-11-08 12:35:09,889 - src.agent.nodes - INFO - Retrieve node - Buscando documentos
2025-11-08 12:35:09,892 - src.embeddings.clip_encoder - INFO - Cargando modelo CLIP: openai/clip-vit-base-patch32
2025-11-08 12:35:09,893 - src.embeddings.clip_encoder - INFO - Usando device: cpu
2025-11-08 12:35:13,044 - src.embeddings.clip_encoder - INFO - CLIP encoder cargado exitosamente
2025-11-08 12:35:13,048 - src.embeddings.clip_encoder - INFO - Codificando texto (primeros 50 chars): ¿toda lainformación del lote 25105?
2025-11-08 12:35:13,202 - src.embeddings.clip_encoder - INFO - Texto codificado. Dimensión: (512,)
2025-11-08 12:35:13,212 - src.agent.nodes - INFO - Documentos recuperados: 0
2025-11-08 12:35:13,231 - src.agent.nodes - INFO - Reason node - Razonando con LLM
2025-11-08 12:35:13,233 - src.agent.nodes - WARNING - No hay documentos para razonar
2025-11-08 12:35:13,236 - src.agent.nodes - INFO - Format node - Formateando respuesta
2025-11-08 12:35:13,238 - src.agent.nodes - WARNING - Respuesta vacía o sin documentos.
2025-11-08 12:35:13,240 - src.agent.nodes - INFO - Respuesta formateada
2025-11-08 12:35:13,243 - src.agent.graph_agent - INFO - Ejecución del agente completada
2025-11-08 15:00:41,620 - src.extractors.structure_parser - INFO - StructureParser inicializado con el esquema: LiquidacionData
2025-11-08 15:12:59,379 - src.extractors.structure_parser - INFO - StructureParser inicializado con el esquema: OperacionNave
2025-11-08 15:17:07,382 - src.extractors.structure_parser - INFO - StructureParser inicializado con el esquema: OperacionNave
2025-11-08 15:17:07,399 - src.extractors.structure_parser - INFO - Iniciando parseo estructurado (Markdown -> OperacionNave)...
2025-11-08 15:17:18,961 - src.extractors.structure_parser - INFO - Parseo y normalización completados.
2025-11-08 15:18:35,844 - src.extractors.structure_parser - INFO - Iniciando parseo estructurado (Markdown -> OperacionNave)...
2025-11-08 15:18:46,442 - src.extractors.structure_parser - INFO - Parseo y normalización completados.
2025-11-08 15:22:35,607 - src.embeddings.clip_encoder - INFO - Cargando modelo CLIP: openai/clip-vit-base-patch32
2025-11-08 15:22:35,612 - src.embeddings.clip_encoder - INFO - Usando device: cpu
2025-11-08 15:22:39,806 - src.embeddings.clip_encoder - INFO - CLIP encoder cargado exitosamente
2025-11-08 15:22:43,776 - src.embeddings.clip_encoder - INFO - Codificando imagen: c:\Users\Usuario\Documents\UTEC\Liquidaciones Agent\multidoc-agent\data\images\excel_images\10841- INFORME GENERAL - MN - SKY KNIGHT  -  LAS BAMBAS   - 09 -10 -2025 (1)_chunk_r0_c0.png
2025-11-08 15:22:44,697 - src.embeddings.clip_encoder - INFO - Imagen codificada. Dimensión: (512,)
2025-11-08 15:22:49,268 - src.embeddings.clip_encoder - INFO - Codificando texto (primeros 50 chars): {"numero_factura": null, "fecha_emision": null, "c
2025-11-08 15:22:49,420 - src.embeddings.clip_encoder - INFO - Texto codificado. Dimensión: (512,)
